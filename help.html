<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help - INSITE</title>
    <link rel="icon" type="image/png" href="images/icons/logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="css/material/light.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body class="light">
    <!-- Mobile menu button -->
    <button class="mobile-menu-btn" type="button" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <div class="text-center mb-4">
                        <a href="index.html">
                            <img src="images/icons/logo.png" alt="INSITE Logo" class="logo">
                        </a>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">
                                <i class="fas fa-home"></i> Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="explore.html">
                                <i class="fas fa-search"></i> Explore Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="predict.html">
                                <i class="fas fa-magic"></i> Predict
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="optimize.html">
                                <i class="fas fa-bullseye"></i> Optimize
                            </a>
                        </li>
                        <li class="nav-item mt-3 border-top pt-3">
                            <a class="nav-link active" href="help.html">
                                <i class="fas fa-question-circle"></i> Help
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">
                                <i class="fas fa-info-circle"></i> About
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2"><i class="fas fa-question-circle me-2"></i>Help & Documentation</h1>
                </div>

                <!-- Quick Start -->
                <div class="card card-surface mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-rocket me-2"></i>Quick Start Guide</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="text-center p-3 border rounded h-100">
                                    <div class="display-4 text-primary mb-2">1</div>
                                    <h6>Explore</h6>
                                    <p class="small text-muted">Browse T-cell datasets using filters. Visualize gene expression patterns across conditions.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="text-center p-3 border rounded h-100">
                                    <div class="display-4 text-primary mb-2">2</div>
                                    <h6>Predict</h6>
                                    <p class="small text-muted">Modify gene expression levels and predict how cells would respond to perturbations.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="text-center p-3 border rounded h-100">
                                    <div class="display-4 text-primary mb-2">3</div>
                                    <h6>Optimize</h6>
                                    <p class="small text-muted">Define a target cell state and find optimal gene combinations to achieve it.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filter Explanations -->
                <div class="card card-surface mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-filter me-2"></i>Understanding the Filters</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th style="width: 20%">Filter</th>
                                        <th style="width: 40%">Description</th>
                                        <th style="width: 40%">Available Options</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong><i class="fas fa-flask me-1"></i>Condition / Perturbation</strong></td>
                                        <td>Condition label used for Explore-phase browsing. In the current release this is a coarse categorization (not a full experimental perturbation ontology yet).</td>
                                        <td>
                                            <span class="badge bg-secondary me-1">control</span>
                                            <span class="badge bg-info me-1">vaccination</span>
                                            <span class="badge bg-warning me-1">infection</span>
                                            <span class="badge bg-danger me-1">drug</span>
                                            <span class="badge bg-success me-1">cytokine</span>
                                            <span class="badge bg-primary me-1">genetic</span>
                                            <span class="badge bg-secondary me-1">stimulation</span>
                                            <span class="badge bg-dark me-1">diet_metabolic</span>
                                            <span class="badge bg-light text-dark me-1">cancer</span>
                                            <span class="badge bg-info me-1">autoimmune</span>
                                            <span class="badge bg-secondary me-1">environment</span>
                                            <span class="badge bg-primary me-1">other</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong><i class="fas fa-dna me-1"></i>T-cell Type</strong></td>
                                        <td>The T-cell subpopulation based on marker gene expression and reference-based annotation.</td>
                                        <td>
                                            <span class="badge bg-primary me-1">CD4</span> Helper T-cells<br>
                                            <span class="badge bg-success me-1">CD8</span> Cytotoxic T-cells<br>
                                            <span class="badge bg-warning me-1">Treg</span> Regulatory T-cells
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong><i class="fas fa-user me-1"></i>Donor Type</strong></td>
                                        <td>Health status of the donor from which cells were isolated.</td>
                                        <td>
                                            <span class="badge bg-success me-1">healthy</span>
                                            <span class="badge bg-danger me-1">diseased</span>
                                            <span class="badge bg-secondary me-1">unknown</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong><i class="fas fa-map-marker-alt me-1"></i>Tissue</strong></td>
                                        <td>Anatomical location from which T-cells were collected.</td>
                                        <td>
                                            <span class="badge bg-danger me-1">blood</span>
                                            <span class="badge bg-info me-1">lung</span>
                                            <span class="badge bg-warning me-1">liver</span>
                                            <span class="badge bg-success me-1">brain</span>
                                            <span class="badge bg-primary me-1">skin</span>
                                            <span class="badge bg-secondary me-1">+ more</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="alert alert-info mt-3">
                            <i class="fas fa-lightbulb me-2"></i>
                            <strong>Smart Filtering:</strong> Options that would result in zero matches are automatically grayed out based on your current selections.
                        </div>
                    </div>
                </div>

                <!-- Visualizations -->
                <div class="card card-surface mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-chart-area me-2"></i>Understanding the Visualizations</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <h6><i class="fas fa-project-diagram me-2 text-primary"></i>UMAP Plot</h6>
                                <p>UMAP (Uniform Manifold Approximation and Projection) is a dimensionality reduction technique that visualizes high-dimensional gene expression data in 2D.</p>
                                <ul class="small">
                                    <li><strong>Each point</strong> represents a cell</li>
                                    <li><strong>Proximity</strong> indicates similar expression profiles</li>
                                    <li><strong>Clusters</strong> represent distinct cell states</li>
                                    <li><strong>Gray points</strong> show all data; <strong>colored points</strong> show your filter selection</li>
                                </ul>
                            </div>
                            <div class="col-md-6 mb-4">
                                <h6><i class="fas fa-th me-2 text-primary"></i>Expression Heatmap</h6>
                                <p>The heatmap displays mean expression levels of highly variable genes (HVGs) across your selected datasets.</p>
                                <ul class="small">
                                    <li><strong>Columns</strong> represent individual genes</li>
                                    <li><strong>Color intensity</strong> indicates expression level (blue=low, red=high)</li>
                                    <li><strong>Dot below</strong> indicates uncertainty/variance</li>
                                    <li><strong>Hover</strong> over cells to see exact values</li>
                                </ul>
                            </div>
                        </div>

                        <h6 class="mt-3"><i class="fas fa-palette me-2 text-primary"></i>Color Scales</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <p class="small mb-2"><strong>Expression Level:</strong></p>
                                <div class="d-flex">
                                    <div class="p-2 text-center flex-fill" style="background: #e3f2fd;">Low</div>
                                    <div class="p-2 text-center flex-fill" style="background: #bbdefb;"></div>
                                    <div class="p-2 text-center flex-fill" style="background: #fff3e0;">Med</div>
                                    <div class="p-2 text-center flex-fill" style="background: #ffccbc;"></div>
                                    <div class="p-2 text-center flex-fill" style="background: #ffebee;">High</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <p class="small mb-2"><strong>Uncertainty (Variance):</strong></p>
                                <div class="d-flex">
                                    <div class="p-2 text-center flex-fill text-white" style="background: #440154;">Low</div>
                                    <div class="p-2 text-center flex-fill text-white" style="background: #31688e;"></div>
                                    <div class="p-2 text-center flex-fill text-white" style="background: #35b779;">Med</div>
                                    <div class="p-2 text-center flex-fill" style="background: #fde725;"></div>
                                    <div class="p-2 text-center flex-fill text-white" style="background: #ff6600;">High</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Information -->
                <div class="card card-surface mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-database me-2"></i>About the Data</h5>
                    </div>
                    <div class="card-body">
                        <h6>Data Source</h6>
                        <p>INSITE uses T-cell single-cell RNA sequencing data from the <strong>scBaseCount</strong> repository, a comprehensive database of uniformly processed scRNA-seq data from public repositories (SRA, GEO).</p>

                        <h6 class="mt-4">Processing Pipeline</h6>
                        <ol class="small">
                            <li><strong>Cell Selection:</strong> T-cells identified using SingleR reference-based annotation and marker gene scoring (CD3D, CD3E, CD4, CD8A, FOXP3)</li>
                            <li><strong>Subtype Classification:</strong> CD4, CD8, and Treg subtypes assigned based on dominant marker expression</li>
                            <li><strong>Quality Control:</strong> Cells filtered by UMI count, gene count, and mitochondrial percentage</li>
                            <li><strong>Normalization:</strong> Log-normalized expression values per 10,000 counts</li>
                            <li><strong>HVG Selection:</strong> Top 2,000 highly variable genes selected for visualization</li>
                        </ol>

                        <h6 class="mt-4">Perturbation Categories</h6>
                        <p class="small">For this Explore-phase release, INSITE clusters unstructured scBaseCount perturbation text into coarse categories for fast browsing:</p>
                        <div class="row small">
                            <div class="col-md-6">
                                <ul>
                                    <li><strong>control:</strong> Baseline/unperturbed samples</li>
                                    <li><strong>vaccination:</strong> Vaccine-induced responses</li>
                                    <li><strong>infection:</strong> Pathogen exposure (viral, bacterial)</li>
                                    <li><strong>drug:</strong> Pharmacological treatments</li>
                                    <li><strong>cytokine:</strong> Cytokine treatments</li>
                                    <li><strong>genetic:</strong> CRISPR, RNAi, engineering, CAR/TCR</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul>
                                    <li><strong>stimulation:</strong> CD3/CD28, PMA/ionomycin, activation</li>
                                    <li><strong>diet_metabolic:</strong> Diet, glucose, metabolic context</li>
                                    <li><strong>cancer:</strong> Oncology-related contexts</li>
                                    <li><strong>autoimmune:</strong> Autoimmune disease contexts</li>
                                    <li><strong>environment:</strong> Hypoxia/oxygen and stress</li>
                                    <li><strong>other:</strong> Other contexts not captured above</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FAQ -->
                <div class="card card-surface mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-comments me-2"></i>Frequently Asked Questions</h5>
                    </div>
                    <div class="card-body">
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                        Why are some filter options grayed out?
                                    </button>
                                </h2>
                                <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Options are disabled when selecting them would result in zero matching datasets. This "smart filtering" helps you navigate to valid data combinations without hitting dead ends.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                        What does the uncertainty dot mean?
                                    </button>
                                </h2>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        The colored dot below each gene in the heatmap represents variance/uncertainty in expression. Purple indicates consistent expression across cells, while orange/yellow indicates high variability. High uncertainty suggests the gene may be differentially expressed or has batch effects.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                        How are mean expression profiles calculated?
                                    </button>
                                </h2>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Expression profiles are weighted averages across all cells in your selected datasets. Each dataset's contribution is proportional to its cell count, ensuring larger studies have more influence while preventing any single dataset from dominating.
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                        Can I compare two conditions?
                                    </button>
                                </h2>
                                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Yes! Click the <strong>+</strong> button to add a second filter row. Each filter row will be displayed as a separate colored set in the UMAP and as a separate heatmap panel, allowing side-by-side comparison.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-custom">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4 mb-3 mb-md-0">
                    <h6>INSITE</h6>
                    <p class="small text-muted mb-0">Integrating scRNA-seq for T-cell Engineering</p>
                </div>
                <div class="col-md-4 mb-3 mb-md-0 text-center">
                    <a href="index.html" class="text-muted me-3">Home</a>
                    <a href="explore.html" class="text-muted me-3">Explore</a>
                    <a href="help.html" class="text-muted me-3">Help</a>
                    <a href="about.html" class="text-muted">About</a>
                </div>
                <div class="col-md-4 text-md-end">
                    <p class="small text-muted mb-0">&copy; 2025 Amir Asiaee & Kaveh Aryan</p>
                    <p class="small text-muted mb-0"><a href="https://www.herox.com/dataworks" target="_blank">DataWorks! Prize 2024</a></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/common.js"></script>
</body>
</html>
